(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{406:function(t,a,s){t.exports=s.p+"assets/img/csrf-process.3fb9b366.jpg"},523:function(t,a,s){"use strict";s.r(a);var e=s(56),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"xss和csrf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xss和csrf"}},[t._v("#")]),t._v(" XSS和CSRF")]),t._v(" "),e("h2",{attrs:{id:"xss"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xss"}},[t._v("#")]),t._v(" XSS")]),t._v(" "),e("p",[t._v("Cross-Site Scripting 跨站脚本攻击，为了和布局的那个CSS区分才这么简写。")]),t._v(" "),e("p",[t._v("是一种代码注入攻击 。")]),t._v(" "),e("p",[t._v("用户UGC输入、URL参数、post参数、第三方链接、Refer、Cookie都不可信任。")]),t._v(" "),e("h3",{attrs:{id:"xss攻击的方式及应对方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xss攻击的方式及应对方法"}},[t._v("#")]),t._v(" XSS攻击的方式及应对方法：")]),t._v(" "),e("ul",[e("li",[t._v("特殊的HTML标签符号。"),e("code",[t._v("escapeHTML")]),t._v("转义"),e("code",[t._v("<>\"'/&")]),t._v("这些字符。")]),t._v(" "),e("li",[t._v("链接跳转。对于链接跳转，如 "),e("code",[t._v('<a href="xxx"')]),t._v(" 或 "),e("code",[t._v('location.href="xxx"')]),t._v("，要检验其内容，禁止以 "),e("code",[t._v("javascript:")]),t._v(" 开头的链接，和其他非法的scheme。")]),t._v(" "),e("li",[t._v("内联的JSON。当 JSON 中包含 "),e("code",[t._v("U+2028")]),t._v(" 或 "),e("code",[t._v("U+2029")]),t._v(" 这两个字符时，不能作为 JavaScript 的字面量使用，否则会抛出语法错误。当JSON中包含字符串 "),e("code",[t._v("<\/script>")]),t._v(" 时，当前的"),e("code",[t._v("script标签")]),t._v("将会被闭合，后面的字符串内容浏览器会按照 HTML 进行解析；通过增加下一个 "),e("code",[t._v("<script>")]),t._v(" 标签等方法就可以完成注入。")]),t._v(" "),e("li",[t._v("Vue中的"),e("code",[t._v("v-html")]),t._v("指令。底层是使用了innerHtml，使用lint工具禁止使用这个指令，使用插值"),e("code",[t._v("{{")]),t._v(" "),e("code",[t._v("value")]),t._v(" "),e("code",[t._v("}}")]),t._v("的方式来渲染。")])]),t._v(" "),e("h2",{attrs:{id:"csrf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[t._v("#")]),t._v(" CSRF")]),t._v(" "),e("p",[t._v("Cross Site request forgery 跨站请求伪造攻击。\n是一种挟制用户在当前已登录的 Web 应用程序上执行非本意的操作的攻击方法")]),t._v(" "),e("p",[e("img",{attrs:{src:s(406),alt:"csrf-process"}})]),t._v(" "),e("h3",{attrs:{id:"csrf攻击的方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csrf攻击的方式"}},[t._v("#")]),t._v(" CSRF攻击的方式")]),t._v(" "),e("h4",{attrs:{id:"get型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get型"}},[t._v("#")]),t._v(" get型")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[t._v(" "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://bank.example/withdraw?amount=10000&for=hacker"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v(" \n")])])]),e("p",[t._v("在受害者访问含有这个img的页面后，浏览器会自动向"),e("code",[t._v("http://bank.example/withdraw?account=xiaoming&amount=10000&for=hacker")]),t._v("发出一次HTTP请求。bank.example就会收到包含受害者登录信息的一次跨域请求。")]),t._v(" "),e("h4",{attrs:{id:"链接类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#链接类型"}},[t._v("#")]),t._v(" 链接类型")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[t._v("  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://test.com/csrf/withdraw.php?amount=1000&for=hacker"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("taget")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("_blank"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  重磅消息！！\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h3",{attrs:{id:"防御方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#防御方式"}},[t._v("#")]),t._v(" 防御方式")]),t._v(" "),e("p",[t._v("refer检查")])])}),[],!1,null,null,null);a.default=r.exports}}]);