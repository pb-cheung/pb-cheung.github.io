(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{476:function(t,a,e){t.exports=e.p+"assets/img/v-model-input.8c33d760.png"},477:function(t,a,e){t.exports=e.p+"assets/img/v-model-checkbox.a7818a83.png"},478:function(t,a,e){t.exports=e.p+"assets/img/vue-form-equal.057b02a8.png"},479:function(t,a,e){t.exports=e.p+"assets/img/v-model-comp.49d2cf09.png"},570:function(t,a,e){"use strict";e.r(a);var s=e(56),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue面试题"}},[t._v("#")]),t._v(" Vue面试题")]),t._v(" "),s("h2",{attrs:{id:"_1-vue-set原理是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue-set原理是什么"}},[t._v("#")]),t._v(" 1.vue.$set原理是什么？")]),t._v(" "),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[t._v("this.data.arr[1] = 'bbb';\nthis.data.obj['xyz'] = 'xxx';\n")])])]),s("p",[t._v("上面这种，常规赋值方式，修改某个数组元素，为对象增加属性在Vue.js中不能被响应更新视图。")]),t._v(" "),s("p",[t._v("原因：")]),t._v(" "),s("ol",[s("li",[t._v("数组的非对象元素没有被添加响应式（即"),s("code",[t._v("arr[0]")]),t._v("没有对应的"),s("code",[t._v("getter")]),t._v("和"),s("code",[t._v("setter")]),t._v("）；")]),t._v(" "),s("li",[t._v("Vue.js中实现响应式是使用"),s("code",[t._v("Object.defineProperty")]),t._v("这个API，这个API无法检测到目标对象属性的新增和删除。")])]),t._v(" "),s("h3",{attrs:{id:"用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[t._v("#")]),t._v(" 用法：")]),t._v(" "),s("ol",[s("li",[t._v("data中的数组使用索引修改值")]),t._v(" "),s("li",[t._v("data中对象属性添加成员")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" indexNum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改数组某个索引的值")]),t._v("\nVue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改对象属性值")]),t._v("\n")])])]),s("ul",[s("li",[t._v("target为数组，调用Vue中重新封装的"),s("code",[t._v("splice")]),t._v("方法。")]),t._v(" "),s("li",[t._v("target为对象\n"),s("ul",[s("li",[t._v("target中已有key属性，直接修改（已经是响应式了）")]),t._v(" "),s("li",[t._v("target不是响应式（通过"),s("code",[t._v("__ob__")]),t._v("属性判断）对象，直接添加key属性")]),t._v(" "),s("li",[t._v("target是响应式对象，且没有key属性，定义响应式并通知。"),s("code",[t._v("defineReactive(ob.value, key, value)")]),t._v(" + "),s("code",[t._v("ob.dep.notify()")])])])])]),t._v(" "),s("h2",{attrs:{id:"_2-v-for-v-if-v-model的原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-v-for-v-if-v-model的原理"}},[t._v("#")]),t._v(" 2.v-for/v-if/v-model的原理")]),t._v(" "),s("h3",{attrs:{id:"v-if-v-for"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v-if-v-for"}},[t._v("#")]),t._v(" v-if/v-for")]),t._v(" "),s("p",[t._v("它们都是"),s("code",[t._v("指令")]),t._v("。\n出现在模板中的标签上，模板会被编译成render函数。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" compiler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-template-compiler'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<div v-if=\"false\"></div>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this) {return (false)?_c('div'):_e()}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<div v-for=\"i in 3\"></div>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this) {return _l((3), function(i){return _c('div')}) }")]),t._v("\n")])])]),s("p",[t._v("从以上demo可以看出")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("v-if")]),t._v("被编译成了三元表达式。（_c创建元素，_e创建空元素）")]),t._v(" "),s("li",[s("code",[t._v("v-for")]),t._v("被编译成了一个函数。（_l对应renderList函数）")]),t._v(" "),s("li",[s("code",[t._v("v-model")]),t._v(" "),s("ul",[s("li",[t._v("表单元素上，实现双向绑定。不同类型的表单生成不同的render代码（指令 + value（innerHtml） + input/change等触发表单值改变的事件处理函数）。")]),t._v(" "),s("li",[t._v("组件上")])])])]),t._v(" "),s("h3",{attrs:{id:"v-model在表单元素上"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v-model在表单元素上"}},[t._v("#")]),t._v(" v-model在表单元素上")]),t._v(" "),s("p",[t._v("v-model不同的表单元素编译出来的代码：")]),t._v(" "),s("p",[t._v("编译出的代码都有"),s("code",[t._v("directives")]),t._v("这个属性。")]),t._v(" "),s("h2",{attrs:{id:"_3-v-model原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-v-model原理"}},[t._v("#")]),t._v(" 3.v-model原理")]),t._v(" "),s("h3",{attrs:{id:"背景-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景-2"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),s("p",[t._v("Vue的核心特性：数据响应式和数据双向绑定。")]),t._v(" "),s("p",[t._v("数据双向绑定就是通过"),s("code",[t._v("v-model")]),t._v("指令实现的。")]),t._v(" "),s("h3",{attrs:{id:"用法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用法-2"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),s("p",[t._v("在表单中：")]),t._v(" "),s("p",[t._v("在表单元素（"),s("code",[t._v("<input>")]),t._v("、"),s("code",[t._v("<textarea>")]),t._v("和"),s("code",[t._v("<select>")]),t._v("等）上使用"),s("code",[t._v("v-model")]),t._v("指令，会创建双向数据绑定。\n它会监听用户的输入，然后根据控件类型自动选取正确的方法来更新元素。\n"),s("code",[t._v("v-model")]),t._v("指定的Vue实例属性是表单的初始值，用户编辑表单后该属性变量也会同步改变。")]),t._v(" "),s("h3",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("p",[s("code",[t._v("v-model")]),t._v("实际上是语法糖。Vue根据表单类型，将v-model转换添加对应的取值（"),s("code",[t._v("domProps")]),t._v("）表达式和变化响应事件（"),s("code",[t._v("on")]),t._v("）。")]),t._v(" "),s("p",[t._v("转换出的render函数举例：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(476),alt:"input类型的render函数"}})]),t._v(" "),s("p",[s("img",{attrs:{src:e(477),alt:"checkbox类型的render函数"}})]),t._v(" "),s("p",[t._v('可以简化这么理解v-model"语法糖"等价转换('),s("a",{attrs:{href:"https://juejin.cn/post/7049135444310622245",target:"_blank",rel:"noopener noreferrer"}},[t._v("图来自掘金"),s("OutboundLink")],1),t._v(")：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(478),alt:"v-model用于表单等价转换"}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://v2.cn.vuejs.org/v2/guide/forms.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 2.x文档 表单输入绑定"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"用于组件的v-model"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用于组件的v-model"}},[t._v("#")]),t._v(" 用于组件的v-model")]),t._v(" "),s("p",[t._v("使用了v-model的父组件，被编译的render函数：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(479),alt:"v-model用于组件"}})]),t._v(" "),s("h3",{attrs:{id:"用法-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用法-3"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),s("p",[t._v("类比表单：")]),t._v(" "),s("ol",[s("li",[t._v("address的值初始化子组件的"),s("code",[t._v("props.value")]),t._v("属性，\n子组件发生变更后触发"),s("code",[t._v("input")]),t._v("事件，并修改绑定的变量address。")]),t._v(" "),s("li",[t._v("那么开发一个能双向绑定的组件（可以使用v-model）\n"),s("ul",[s("li",[t._v("就要接收处理"),s("code",[t._v("value")]),t._v("属性")]),t._v(" "),s("li",[t._v("和父组件通信同步数据时候提交"),s("code",[t._v("input")]),t._v("事件，并传值")]),t._v(" "),s("li",[t._v("属性名"),s("code",[t._v("value")]),t._v("和事件名"),s("code",[t._v("input")]),t._v("可以通过model对象修改重命名")])])])]),t._v(" "),s("h3",{attrs:{id:"原理-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理-2"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("p",[t._v("也是语法糖。提交指定事件，触发父组件的callback函数更新绑定值。")]),t._v(" "),s("h2",{attrs:{id:"_4-vue中观察者模式和发布订阅模式的区别和场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-vue中观察者模式和发布订阅模式的区别和场景"}},[t._v("#")]),t._v(" 4.Vue中观察者模式和发布订阅模式的区别和场景")]),t._v(" "),s("ul",[s("li",[t._v("响应式数据变化，是典型的观察者模式")]),t._v(" "),s("li",[t._v("事件绑定是发布订阅模式")])]),t._v(" "),s("p",[t._v('观察者（watcher）会被"被观察者"（属性dep）收集，数据变化的时候，被观察者会'),s("strong",[t._v("通知")]),t._v("所有的观察者。\n也可以表述为：订阅者（watcher）订阅属性变化事件，属性变化的时候，"),s("strong",[t._v("发布")]),t._v("这个信息，订阅者收到。")]),t._v(" "),s("p",[t._v("观察者模式包括了发布订阅模式。")]),t._v(" "),s("p",[t._v("观察者模式中，观察者和被观察者是存在关联的。发布订阅模式中，订阅者和发布者没有关联（可以只发布不订阅）。")]),t._v(" "),s("h2",{attrs:{id:"生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),s("h2",{attrs:{id:"nexttick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nexttick"}},[t._v("#")]),t._v(" $nextTick")]),t._v(" "),s("p",[t._v("在下次DOM更新循环结束的时候执行延迟回调。在修改数据之后立即调用这个方法，获取更新后的DOM。")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/vue/nextTick.html"}},[t._v("$nextTick")])],1),t._v(" "),s("h2",{attrs:{id:"vue-router"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-router"}},[t._v("#")]),t._v(" Vue-Router")])])}),[],!1,null,null,null);a.default=v.exports}}]);